{% extends "base.html" %}

{% block title %}Edit Product | Itra Store ğŸ§´{% endblock %}

{% block content %}
<div class="container form-container mt-4">
  <h2 class="mb-4 text-center">ğŸ“ Edit Product Details</h2>

  <form method="POST" enctype="multipart/form-data">
    <div class="mb-3">
      <label for="name" class="form-label">ğŸ“› Product Name</label>
      <input type="text" class="form-control" id="name" name="name" value="{{ product.name }}" required>
    </div>

    <div class="mb-3">
      <label for="type" class="form-label">ğŸŒ¼ Scent Type</label>
      <input type="text" class="form-control" id="type" name="type" value="{{ product.type }}" required>
    </div>

    <div class="row">
      <div class="col-md-4 mb-3">
        <label for="price" class="form-label">ğŸ’° Price (â‚¹)</label>
        <input type="number" class="form-control" id="price" name="price" value="{{ product.price }}" required>
      </div>
      <div class="col-md-4 mb-3">
        <label for="quantity" class="form-label">ğŸ“¦ Quantity</label>
        <input type="number" class="form-control" id="quantity" name="quantity" value="{{ product.quantity }}" required>
      </div>
      <div class="col-md-4 mb-3">
        <label for="unit" class="form-label">ğŸ§ª Unit (ml/gm)</label>
        <input type="text" class="form-control" id="unit" name="unit" value="{{ product.unit }}" required>
      </div>
    </div>

    <div class="mb-3">
      <label for="image" class="form-label">ğŸ–¼ï¸ Upload New Image (optional)</label>
      <input type="file" class="form-control" id="image" name="image" accept="image/*" onchange="previewImage(event)">
      <img id="preview" src="{{ product.image_url }}" alt="Product Image Preview" class="mt-3 rounded" style="max-height: 200px; object-fit: contain; border: 1px solid #ccc;">
    </div>

    <div class="text-end">
      <button type="submit" class="btn btn-primary btn-lg">âœ… Update Product</button>
    </div>
  </form>
</div>
{% endblock %}

{% block scripts %}
<script>
  function previewImage(event) {
    const reader = new FileReader();
    reader.onload = function () {
      const output = document.getElementById('preview');
      output.src = reader.result;
    };
    reader.readAsDataURL(event.target.files[0]);
  }
</script>
{% endblock %}
