{% extends "base.html" %}
{% block title %}Product Type Overview | Itra Store{% endblock %}

{% block content %}
<h2 class="mb-4 text-center">🧪 Product Type Overview</h2>

<div class="table-responsive">
  <table class="table table-bordered table-hover align-middle">
    <thead class="table-dark text-center">
      <tr>
        <th>🖼️ Image</th>
        <th>📦 Product Name</th>
        <th>🧪 Type</th>
        <th>📈 Total Quantity</th>
        <th>🛒 Sold</th>
        <th>📦 Remaining</th>
      </tr>
    </thead>
    <tbody>
      {% if products %}
        {% for item in products %}
        <tr class="text-center">
          <td>
            {% set image_map = {
              'Musk': 'musk_itra.jpg',
              'Oud': 'oud_itra.jpg',
              'Oudh': 'oudh_itra.jpeg',
              'Rose': 'rose_itra.jpg',
              'Sandalwood': 'sandalwood_itra.jpg'
            } %}
            {% set image_file = image_map.get(item.type, 'default.jpg') %}
            <img src="{{ url_for('static', filename='images/' ~ image_file) }}" 
                 alt="{{ item.name }}" width="60" height="60" 
                 style="object-fit: cover; border-radius: 8px;">
          </td>
          <td>{{ item.name }}</td>
          <td>{{ item.type }}</td>
          <td>{{ item.quantity }}</td>
          <td>{{ item.sold }}</td>
          <td>
            <span class="{% if item.quantity - item.sold == 0 %}text-danger{% elif item.quantity - item.sold < 10 %}text-warning{% else %}text-success{% endif %}">
              {{ item.quantity - item.sold }}
            </span>
          </td>
        </tr>
        {% endfor %}
      {% else %}
        <tr>
          <td colspan="6" class="text-center text-muted">No product data available.</td>
        </tr>
      {% endif %}
    </tbody>
  </table>
</div>
{% endblock %}
