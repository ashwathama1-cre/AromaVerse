{% extends "base.html" %}

{% block title %}Admin Dashboard | AromaVerse{% endblock %}

{% block content %}
<div class="container py-4">
  <h2 class="mb-4">üìä Admin Dashboard</h2>

  <!-- Summary Cards -->
  <div class="row mb-4 text-center">
    <div class="col-md-3 mb-2">
      <div class="card shadow-sm p-3">
        <h5>Total Revenue</h5>
        <p class="text-success fw-bold">‚Çπ{{ total_revenue }}</p>
      </div>
    </div>
    <div class="col-md-3 mb-2">
      <div class="card shadow-sm p-3">
        <h5>Total Products</h5>
        <p class="fw-bold">{{ total_products }}</p>
      </div>
    </div>
    <div class="col-md-3 mb-2">
      <div class="card shadow-sm p-3">
        <h5>Total Sold</h5>
        <p class="fw-bold">{{ total_sold }}</p>
      </div>
    </div>
    <div class="col-md-3 mb-2">
      <div class="card shadow-sm p-3">
        <h5>Total Sellers</h5>
        <p class="fw-bold">{{ total_sellers }}</p>
      </div>
    </div>
  </div>

  <!-- Pie Chart -->
  <div class="row mb-5">
    <div class="col-md-6 mx-auto">
      <canvas id="productChart"></canvas>
    </div>
  </div>

  <!-- Seller Overview -->
  <h4 class="mb-3">üõçÔ∏è Seller Overview</h4>
  <div class="table-responsive">
    <table class="table table-bordered table-hover">
      <thead class="table-light">
        <tr>
          <th>Seller Name</th>
          <th>Email</th>
          <th>Total Products</th>
          <!-- Optional: <th>Profile</th> -->
        </tr>
      </thead>
      <tbody>
        {% for seller in seller_data %}
        <tr>
          <td>{{ seller.seller }}</td>
          <td>{{ seller.email }}</td>
          <td>{{ seller.product_count }}</td>
          <!-- Optional: <td><a href="/seller/{{ seller.id }}">View</a></td> -->
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

<!-- Chart JS -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const ctx = document.getElementById('productChart');
new Chart(ctx, {
  type: 'pie',
  data: {
    labels: {{ chart_labels | safe }},
    datasets: [{
      label: 'Product Distribution',
      data: {{ chart_data | safe }},
      backgroundColor: [
        '#ff6384', '#36a2eb', '#ffce56', '#4bc0c0', '#9966ff', '#f67019'
      ],
      borderWidth: 1
    }]
  },
  options: {
    responsive: true,
    plugins: {
      legend: {
        position: 'bottom'
      }
    }
  }
});
</script>
{% endblock %}
