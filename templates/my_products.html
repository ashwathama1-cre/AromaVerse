{% extends 'base.html' %}

{% block title %}My Products | Seller{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="card shadow-lg rounded-4 p-4">
    <h2 class="text-center mb-4">ğŸ“¦ My Listed Products</h2>

    <div class="text-end mb-3">
      <a href="/add_product" class="btn btn-success">
        â• Add New Product
      </a>
    </div>

    {% if products %}
    <div class="table-responsive">
      <table class="table table-bordered table-hover align-middle">
        <thead class="table-dark text-center">
          <tr>
            <th>ğŸ–¼ï¸ Image</th>
            <th>ğŸ“› Name</th>
            <th>ğŸŒ¸ Type</th>
            <th>ğŸ’° Price (â‚¹)</th>
            <th>ğŸ“ Unit</th>
            <th>ğŸ“¦ Remaining</th>
            <th>âš™ï¸ Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for p in products %}
          <tr class="text-center">
            <td>
              <img src="{{ url_for('static', filename='images/' + p.image) }}" width="60" height="60" class="rounded border">
            </td>
            <td>{{ p.name }}</td>
            <td>{{ p.type }}</td>
            <td>{{ p.price }}</td>
            <td>{{ p.unit }}</td>
            <td>{{ p.total_qty - p.sold_qty }}</td>
            <td>
              <a href="/edit_product/{{ p.id }}" class="btn btn-warning btn-sm mb-1" title="Edit">
                ğŸ“ Edit
              </a>
              <a href="/delete_product/{{ p.id }}" onclick="return confirm('Are you sure you want to delete this product?')" class="btn btn-danger btn-sm" title="Delete">
                ğŸ—‘ï¸ Delete
              </a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    {% else %}
      <div class="alert alert-info text-center mt-4">
        You haven't added any products yet.
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
