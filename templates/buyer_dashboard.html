{% extends "base.html" %}

{% block title %}Buyer Dashboard | Itra Store{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap">
    <h2>ğŸ‘‹ Welcome, {{ username }}</h2>
    <form class="d-flex flex-wrap gap-2" method="get" action="/buyer_dashboard">
      <input class="form-control me-2" type="search" name="search" placeholder="ğŸ” Search for Itra..." title="Search by product name" />
      <select name="type" class="form-select me-2" title="Filter by scent type">
        <option value="">ğŸŒˆ All Types</option>
        <option value="Rose">ğŸŒ¹ Rose</option>
        <option value="Musk">ğŸ¦Œ Musk</option>
        <option value="Jasmine">ğŸŒ¼ Jasmine</option>
        <!-- Add more types as needed -->
      </select>
      <button class="btn btn-primary" type="submit" title="Apply Filter">ğŸ” Filter</button>
    </form>
  </div>

  {% if products %}
  <div class="row g-4">
    {% for product in products %}
    <div class="col-md-4 col-sm-6">
      <div class="card h-100 product-card shadow-sm border-0">
        <img src="{{ product.image_url }}" class="card-img-top rounded-top" alt="{{ product.name }}" style="object-fit: cover; height: 200px;" />
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">{{ product.name }}</h5>
          <p class="card-text">
            ğŸ§ª <strong>Type:</strong> {{ product.type }}<br>
            ğŸ’° <strong>Price:</strong> â‚¹{{ product.price }}<br>
            ğŸ“¦ <strong>Available:</strong> {{ product.quantity }}
            <span class="badge bg-secondary">{{ product.unit }}</span>
          </p>
          <div class="mt-auto d-grid gap-2">
            <a href="/buy/{{ product.id }}" class="btn btn-success" title="Buy Now">
              <i class="bi bi-bag-check-fill"></i> ğŸ›ï¸ Buy Now
            </a>
            <a href="/add_to_cart/{{ product.id }}?redirect=buyer_dashboard" class="btn btn-outline-primary">

              <i class="bi bi-cart-plus"></i> â• Add to Cart
            </a>
            <a href="/wishlist/{{ product.id }}" class="btn btn-outline-danger" title="Add to Wishlist">
              <i class="bi bi-heart"></i> â¤ï¸ Wishlist
            </a>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="alert alert-info text-center mt-4">
    ğŸ˜ No products found. Try a different filter or search.
  </div>
  {% endif %}
</div>
{% endblock %}
