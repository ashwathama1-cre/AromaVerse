{% extends "base.html" %}

{% block title %}Buyer Dashboard | Itra Store{% endblock %}

{% block content %}
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>👋 Welcome, {{ username }}</h2>
    <form class="d-flex" method="get" action="/buyer_dashboard">
      <input class="form-control me-2" type="search" name="search" placeholder="🔍 Search for Itra..." title="Search by product name" />
      <select name="type" class="form-select me-2" title="Filter by scent type">
        <option value="">🌈 All Types</option>
        <option value="Rose">🌹 Rose</option>
        <option value="Musk">🦌 Musk</option>
        <option value="Jasmine">🌼 Jasmine</option>
        <!-- Add more types as needed -->
      </select>
      <button class="btn btn-primary" type="submit" title="Apply Filter">🔎 Filter</button>
    </form>
  </div>

  {% if products %}
  <div class="row g-4">
    {% for product in products %}
    <div class="col-md-4">
      <div class="card h-100 product-card shadow-sm">
        <img src="{{ product.image_url }}" class="card-img-top" alt="{{ product.name }}" />
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">{{ product.name }}</h5>
          <p class="card-text">
            🧪 <strong>Type:</strong> {{ product.type }} <br />
            💰 <strong>Price:</strong> ₹{{ product.price }} <br />
            📦 <strong>Available:</strong> {{ product.quantity }} 
            <span class="badge bg-secondary badge-unit">{{ product.unit }}</span>
          </p>
          <div class="mt-auto d-grid gap-2">
            <a href="/buy/{{ product.id }}" class="btn btn-success" title="Buy Now"><i class="bi bi-bag-check-fill"></i> 🛍️ Buy Now</a>
            <a href="/add_to_cart/{{ product.id }}" class="btn btn-outline-primary" title="Add to Cart"><i class="bi bi-cart-plus"></i> ➕ Add to Cart</a>
            <a href="/wishlist/{{ product.id }}" class="btn btn-outline-danger" title="Add to Wishlist"><i class="bi bi-heart"></i> ❤️ Wishlist</a>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="alert alert-info text-center">
    😞 No products found. Try a different filter or search.
  </div>
  {% endif %}
</div>
{% endblock %}
